<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Redis,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="NoSQL入门和概述NoSQL数据类型简介以一个电商客户、订单、订购、地址模型来对比下关系型数据库和非关系型数据库。 对于关系型数据库，我们至少需要客户表customer，订单表order_detail/order_item，订购信息表order_payment，收获地址表order_address。甚至可能需要库存表（相当于购物车）。客户表和订单表、地址表之间的关系是一对多。随着功能的增加，表的">
<meta name="keywords" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis入门介绍与数据类型">
<meta property="og:url" content="http://yoursite.com/2019/08/25/redis入门介绍与数据类型/index.html">
<meta property="og:site_name" content="Dai戴的博客">
<meta property="og:description" content="NoSQL入门和概述NoSQL数据类型简介以一个电商客户、订单、订购、地址模型来对比下关系型数据库和非关系型数据库。 对于关系型数据库，我们至少需要客户表customer，订单表order_detail/order_item，订购信息表order_payment，收获地址表order_address。甚至可能需要库存表（相当于购物车）。客户表和订单表、地址表之间的关系是一对多。随着功能的增加，表的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2pqsd9sj30in0g2myg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2q60r31j30k20cnq49.jpg">
<meta property="og:image" content="http://yoursite.com/2019/08/25/redis入门介绍与数据类型/D:/Learning/Redis/截图/8.启动redis客户端进行测试.png">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2r02pg2j30jz032dfw.jpg">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/11.key%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/10.%E6%BC%94%E7%A4%BAmove%E6%8C%87%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/12.string%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/13.%E5%B8%B8%E7%94%A8List%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/14.Set%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/15.Hash%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/16.Zset%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png">
<meta property="og:updated_time" content="2019-09-08T06:05:59.364Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis入门介绍与数据类型">
<meta name="twitter:description" content="NoSQL入门和概述NoSQL数据类型简介以一个电商客户、订单、订购、地址模型来对比下关系型数据库和非关系型数据库。 对于关系型数据库，我们至少需要客户表customer，订单表order_detail/order_item，订购信息表order_payment，收获地址表order_address。甚至可能需要库存表（相当于购物车）。客户表和订单表、地址表之间的关系是一对多。随着功能的增加，表的">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2pqsd9sj30in0g2myg.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/08/25/redis入门介绍与数据类型/">





  <title> Redis入门介绍与数据类型 | Dai戴的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Dai戴的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/25/redis入门介绍与数据类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Dai">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dai戴的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Redis入门介绍与数据类型
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-25T10:26:41+08:00">
                2019-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Redis/" itemprop="url" rel="index">
                    <span itemprop="name">Redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="NoSQL入门和概述"><a href="#NoSQL入门和概述" class="headerlink" title="NoSQL入门和概述"></a>NoSQL入门和概述</h2><h3 id="NoSQL数据类型简介"><a href="#NoSQL数据类型简介" class="headerlink" title="NoSQL数据类型简介"></a>NoSQL数据类型简介</h3><p>以一个电商客户、订单、订购、地址模型来对比下<strong>关系型数据库</strong>和<strong>非关系型数据库</strong>。</p>
<p>对于关系型数据库，我们至少需要客户表<code>customer</code>，订单表<code>order_detail/order_item</code>，订购信息表<code>order_payment</code>，收获地址表<code>order_address</code>。甚至可能需要库存表（相当于购物车）。客户表和订单表、地址表之间的关系是一对多。随着功能的增加，表的关系会越来越复杂，对表进行<code>crud</code>操作会非常麻烦。常常会涉及到关联查询(写Join语句)。</p>
<p>BSON：是一种类json的二进制形式的存储格式，简称Binary JSON，它和JSON一样，支持内嵌的文档对象和数组对象。</p>
<p>高并发的操作是不太建议有关联查询的，互联网公司用冗余数据来避免关联查询。分布式事务是支持不了太多的并发的。在NoSQL中只需要根据键值对来查询即可。</p>
<h4 id="聚合类型"><a href="#聚合类型" class="headerlink" title="聚合类型"></a>聚合类型</h4><ul>
<li><strong>KV键值对</strong></li>
<li><strong>BSON</strong></li>
<li>列族<br>按列存储数据。</li>
<li>图形<br>对于复杂的关系用图来描述。</li>
</ul>
<h3 id="NoSQL数据库的四大分类"><a href="#NoSQL数据库的四大分类" class="headerlink" title="NoSQL数据库的四大分类"></a>NoSQL数据库的四大分类</h3><ul>
<li>KV键值<br>新浪：BerkeleyDB + redis<br>美团：redis + tair<br>阿里、百度：memcache + redis</li>
<li>文档型数据库（bson格式比较多）<br>CouchDB<br><strong>MongoDB</strong>：是一个<strong>基于分布式文件存储的数据库</strong>。由C++编写，旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。是一个介于关系数据库和非关系数据库之间的产品。</li>
<li>列存储数据库<br>Cassandra，HBase。分布式文件系统。</li>
<li>图数据库<br>它不是放图形的，放的是关系比如：朋友圈社交网络、广告推荐系统。专注于构建图谱，如Neo4J，InfoGrid。</li>
<li>四者对比</li>
</ul>
<h3 id="在分布式数据库中CAP原理CAP-BASE"><a href="#在分布式数据库中CAP原理CAP-BASE" class="headerlink" title="在分布式数据库中CAP原理CAP + BASE"></a>在分布式数据库中CAP原理CAP + BASE</h3><ul>
<li><p>传统的<strong>ACID</strong>是什么？<br>A(Atomicity)原子性、C(Consistency)一致性、I(Isolation)独立性、D(Durability)持久性。</p>
</li>
<li><p><strong>CAP</strong></p>
<ul>
<li>C(Consistency)：强一致性</li>
<li>A(Availability)：高可用性</li>
<li>P(Partition tolerance)：分区容错性</li>
</ul>
</li>
<li><p><strong>CAP的3进2</strong><br>CAP理论的核心是：一个分布式系统不可能同时很好地满足<strong>一致性</strong>，<strong>可用性</strong>和<strong>分区容错性</strong>这三个需求，最多只能同时较好地满足两个。<br>因此，根据CAP原理将<code>NoSQL</code>数据库分成了<code>满足CA原则</code>、<code>满足CP原则</code>、<code>满足AP原则</code>三大类：</p>
<ul>
<li>CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。传统的Oracle数据库。</li>
<li>CP - 满足一致性，分区容错性的系统，通常性能不是特别高。<code>Redis</code>、<code>MongoDB</code></li>
<li><strong>AP</strong> - 满足可用性，分区容错性的系统，通常可能对一致性要求低一些。<strong>大多数网站架构的选择。</strong></li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2pqsd9sj30in0g2myg.jpg" alt="6.CAP.png"></p>
<p>由于当前网络硬件肯定会出现延迟丢包等问题，所以<strong>分区容忍性(P)</strong>是我们必须要实现的。<br>对于<code>A(高可用性)</code>和<code>C(强一致性)</code>的选择可以看这样一个例子：比如双11的时候有一款LV的包热卖，那么我们需要在这款包上面展示<em>浏览数、收藏数、评价数</em>等信息，而且当时的浏览量肯定很大，高并发的环境。这时就需要高可用性了，网站不能崩；而那些<em>浏览数、收藏数</em>等信息的精确程度对用户来说不是特别关键，只需保证若一致性即可。</p>
<p><strong>数据库事务一致性需求</strong>：很多web实时系统并不要求严格的数据库事务，对一致性的要求很低，有些场合对写一致性要求并不高。允许实现最终一致性。</p>
<p><strong>数据库的写实时性和读实时性需求</strong>：对关系数据库来说，插入一条数据后立刻查询，是肯定可以读出来这条数据的；但是对于很多web应用来说，并不要求这么高的实时性。比方说发一条消息之后，过几秒乃至十几秒之后，我的订阅者才看得到这条消息是完全可以接受的。</p>
<p><strong>对复杂的SQL查询，特别是多表关联查询的需求</strong>：任何大数据量的web系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的报表查询。</p>
</li>
<li><p><strong>BASE</strong><br>BASE就是为了解决关系数据库强一致性引起的问题而导致的可用性降低而提出的解决方案。BASE其实是下面三个术语的缩写：</p>
<ul>
<li>基本可用（Basically Available）</li>
<li>软状态（Soft state）</li>
<li>最终一致（Eventually consistent）</li>
</ul>
<p>它的思想是通过让系统放松对某一时刻数据一致性的要求来换取系统整体伸缩性和性能上改观。为什么这样说呢，缘由就在于大型系统往往由于地狱分布和极高性能的要求，不可能采用分布式事务来完成这些指标，要想获得这些指标，我们必须采用另一种方式来完成。BASE就是解决这个问题的方法。</p>
</li>
<li><p>分布式 + 集群简介<br>简单来说：</p>
<ol>
<li>分布式：不同的多台服务器上面部署不同的服务模块，他们之间通过Rpc / Rmi之间通信和调用，对外提供服务和组内协作。</li>
<li>集群：不同的多态服务器上面部署相同的服务模块，通过分布式调度软件进行统一的调度，对外提供服务和访问。</li>
</ol>
</li>
</ul>
<h2 id="Redis入门介绍"><a href="#Redis入门介绍" class="headerlink" title="Redis入门介绍"></a>Redis入门介绍</h2><h3 id="入门概念"><a href="#入门概念" class="headerlink" title="入门概念"></a>入门概念</h3><h4 id="Redis是什么"><a href="#Redis是什么" class="headerlink" title="Redis是什么"></a>Redis是什么</h4><p>Redis：REmote DIctionary Server(远程字典服务器)。开源免费，用C语言编写，是一个高性能的（key/value）分布式的内存服务器，基于内存运行并支持持久化的 NoSQL 数据库，也被人们称为数据结构服务器。</p>
<p>Redis与其它 NoSQL 产品有以下三个特点：</p>
<ol>
<li>Redis支持数据的持久化，可将内存中的数据保存在磁盘中，重启的时候再次加载进行使用；</li>
<li>Redis不仅支持简单的 key-value 类型的数据，同时还提供 list，set，zset，hash 等数据结构的存储；</li>
<li>Redis支持数据的备份，即 master-slave 模式的数据备份。</li>
</ol>
<h4 id="能干嘛"><a href="#能干嘛" class="headerlink" title="能干嘛"></a>能干嘛</h4><ul>
<li>内存存储和持久化：redis支持异步将内存中的数据写到硬盘上，同时不影响继续服务。</li>
<li>取最新N个数据的操作，如：可以将最新的10条评论的 ID 放在 Redis 的 List 集合里面。</li>
<li>模拟类似与 HttpSession 这种需要设定过期时间的功能。</li>
<li>发布、订阅消息系统。</li>
<li>定时器、计数器。</li>
</ul>
<h4 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h4><p>Redis的下载与安装可以看中文版的官网：<a href="https://www.redis.net.cn/download/" target="_blank" rel="noopener">https://www.redis.net.cn/download/</a></p>
<p>安装完成后其实在<code>/usr/local/bin</code>下，<code>cd</code>到这个目录后，可以使用命令<code>ls -l</code>进行查看。为启动 Redis 服务器，可以在<code>bin</code>目录下直接敲<code>redis-server</code>，默认的端口是<strong>6379</strong>；同时启动另一个终端，<code>cd</code>到相同的目录下，输入<code>redis-cli</code>即可完成客户端的启动。<br><img src="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2q60r31j30k20cnq49.jpg" alt="7.redis服务端的启动.png"></p>
<p><img src="/2019/08/25/redis入门介绍与数据类型/D:/Learning\Redis\截图\8.启动redis客户端进行测试.png" alt></p>
<p>当然上述的启动操作也可以在<code>/opt/redis-5.0.4/src</code>（这是我的安装目录）下进行。<br>用命令查看后台的Redis服务有没有起来，可以用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure>
<p>默认情况下，Redis 并不会以一个守护进程的方式在后台运行，可以通过修改配置文件的方式更改其默认的行为。但是首先需要备份一份配置文件。根据课程的做法，我在<code>/home/dqj</code>下创建一个新的文件夹<code>myredis</code>用来存放<code>redis</code>的备份文件。随后用<code>vim</code>工具进行修改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/usr/<span class="built_in">local</span>/bin<span class="comment"># mkdir /home/dqj/myredis</span></span><br><span class="line">root@ubuntu:/usr/<span class="built_in">local</span>/bin<span class="comment"># cd /opt/redis-5.0.4/</span></span><br><span class="line">root@ubuntu:/opt/redis-5.0.4<span class="comment"># ls -l</span></span><br><span class="line">total 260</span><br><span class="line">-rw-rw-r--  1 root root 99445 Mar 18 09:21 00-RELEASENOTES</span><br><span class="line">-rw-rw-r--  1 root root    53 Mar 18 09:21 BUGS</span><br><span class="line">-rw-rw-r--  1 root root  1894 Mar 18 09:21 CONTRIBUTING</span><br><span class="line">-rw-rw-r--  1 root root  1487 Mar 18 09:21 COPYING</span><br><span class="line">drwxrwxr-x  6 root root  4096 Jul 16 07:09 deps</span><br><span class="line">-rw-r--r--  1 root root    92 Jul 16 07:20 dump.rdb</span><br><span class="line">-rw-rw-r--  1 root root    11 Mar 18 09:21 INSTALL</span><br><span class="line">-rw-rw-r--  1 root root   151 Mar 18 09:21 Makefile</span><br><span class="line">-rw-rw-r--  1 root root  4223 Mar 18 09:21 MANIFESTO</span><br><span class="line">-rw-rw-r--  1 root root 20555 Mar 18 09:21 README.md</span><br><span class="line">-rw-rw-r--  1 root root 62155 Mar 18 09:21 redis.conf</span><br><span class="line">-rwxrwxr-x  1 root root   275 Mar 18 09:21 runtest</span><br><span class="line">-rwxrwxr-x  1 root root   280 Mar 18 09:21 runtest-cluster</span><br><span class="line">-rwxrwxr-x  1 root root   281 Mar 18 09:21 runtest-sentinel</span><br><span class="line">-rw-rw-r--  1 root root  9710 Mar 18 09:21 sentinel.conf</span><br><span class="line">drwxrwxr-x  3 root root  4096 Jul 16 07:18 src</span><br><span class="line">drwxrwxr-x 10 root root  4096 Mar 18 09:21 tests</span><br><span class="line">drwxrwxr-x  8 root root  4096 Mar 18 09:21 utils</span><br><span class="line">root@ubuntu:/opt/redis-5.0.4<span class="comment"># cp redis.conf /home/dqj/myredis/</span></span><br><span class="line">root@ubuntu:/opt/redis-5.0.4<span class="comment"># vim /home/dqj/myredis/redis.conf</span></span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/005Mjp9lly1g6s2r02pg2j30jz032dfw.jpg" alt="9.修改为默认启动成后台进程.png"></p>
<p>如果想按照这个配置文件的方式启动，则需要这样写（注意在<code>/usr/local/bin</code>目录下）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/usr/<span class="built_in">local</span>/bin<span class="comment"># redis-server /home/dqj/myredis/redis.conf</span></span><br></pre></td></tr></table></figure>
<p>这时可以不需要启动另一个终端来启动客户端，可以直接在当前终端下写，因为Redis服务已经在后台启动了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/usr/<span class="built_in">local</span>/bin<span class="comment"># redis-cli -p 6379</span></span><br></pre></td></tr></table></figure>
<h4 id="Redis的一些基础知识"><a href="#Redis的一些基础知识" class="headerlink" title="Redis的一些基础知识"></a>Redis的一些基础知识</h4><ul>
<li><p><code>Redis</code>是单进程运行的。以单进程模型来处理客户端的请求，对读写事件的响应。</p>
</li>
<li><p><code>Redis</code>默认有16个数据库，类似数组下标从0开始，初始默认使用零号库，可以使用<code>select</code>语句来进行数据库之间的切换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; select 7</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[7]&gt; get foo</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379[7]&gt; select 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get foo</span><br><span class="line"><span class="string">"bar"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Dbsize</code>查看当前数据库的<code>key</code>的数量，使用<code>keys *</code>，可以具体查看<code>key</code>的名称。</p>
</li>
<li><p><code>FLUSHDB</code>：清空当前库。</p>
</li>
<li><p><code>FLUSHALL</code>：清空所有库。</p>
</li>
<li><p>统一密码管理，16个库都是同样的密码，要么都OK，要么一个也连不上。</p>
</li>
<li><p><code>Redis</code>索引都是从0开始。</p>
</li>
</ul>
<h2 id="Redis数据类型"><a href="#Redis数据类型" class="headerlink" title="Redis数据类型"></a>Redis数据类型</h2><h3 id="Redis的五大数据类型"><a href="#Redis的五大数据类型" class="headerlink" title="Redis的五大数据类型"></a>Redis的五大数据类型</h3><ul>
<li>String（字符串）<br><code>string</code>是<code>redis</code>最基本的类型，一个<code>key</code>对应一个<code>value</code>。<code>string</code>类型是二进制安全的。意思是<code>redis</code>的<code>string</code>可以包含任何数据。比如<code>jpg</code>图片或者序列化的对象。一个<code>redis</code>中字符串<code>value</code>最多可以是<code>512M</code>。</li>
<li>Hash（哈希，类似<code>java</code>里的<code>Map</code>）<br><code>Redis hash</code>是一个键值对集合，它是一个<code>string</code>类型的<code>field</code>和<code>value</code>的映射表，<code>hash</code>特别适合用于存储对象。类似<code>Java</code>里面的<code>Map&lt;String,Object&gt;</code>。</li>
<li>List（列表）<br><code>Redis</code>列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。它的底层实际是个<strong>链表</strong>。</li>
<li>Set（集合）<br><code>Redis</code>的<code>Set</code>是<code>string</code>类型的无序无重复集合，它是通过<code>HashTable</code>实现的。</li>
<li>Zset（sorted set：有序集合）<br><code>Redis Zset</code>和<code>Set</code>一样也是<code>string</code>类型元素的集合，且不允许重复的成员。不同的是<code>Zset</code>每个元素都会关联一个<code>double</code>类型的分数，<code>redis</code>正是通过分数来为集合中的成员进行从小到大的排序。<code>zset</code>的成员是唯一的，但分数（score）却可以重复。</li>
</ul>
<p>哪里去获得<code>redis</code>常见的数据类型操作命令?            —— Http://redisdoc.com/</p>
<h3 id="Redis键（key）"><a href="#Redis键（key）" class="headerlink" title="Redis键（key）"></a>Redis键（key）</h3><p>常用<code>key</code>命令：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/11.key%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png" alt></p>
<ul>
<li><code>keys *</code>：查看当前库中的<code>key</code></li>
<li><code>exist key的名字</code>：判断某个<code>key</code>是否存在。</li>
<li><code>move key db</code>：把当前库中的<code>key</code>移到指定的库中。<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/10.%E6%BC%94%E7%A4%BAmove%E6%8C%87%E4%BB%A4.png" alt></li>
<li><code>expire key 秒钟</code>：为给定的<code>key</code>设置过期时间。</li>
<li><code>ttl key</code>：查看还有多少秒过期，<code>-1</code>表示永不过期，<code>-2</code>表示已经过期。</li>
<li><code>type key</code>：查看你的<code>key</code>是什么类型。</li>
</ul>
<h3 id="Redis字符串（String）"><a href="#Redis字符串（String）" class="headerlink" title="Redis字符串（String）"></a>Redis字符串（String）</h3><p>常用<code>String</code>命令：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/12.string%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png" alt></p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>set / get / del / append / strlen</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">"k2"</span></span><br><span class="line">2) <span class="string">"k1"</span></span><br><span class="line">127.0.0.1:6379&gt; del k2</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">"k1"</span></span><br><span class="line">127.0.0.1:6379&gt; APPEND k1 abc</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; get k1</span><br><span class="line"><span class="string">"v1abc"</span></span><br><span class="line">127.0.0.1:6379&gt; STRLEN k1</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br></pre></td></tr></table></figure>
</li>
<li><p>Incr / decr / incrby / decrby：一定要是数字才能进行加减。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> k1 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; INCR k1</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; get k1</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">127.0.0.1:6379&gt; INCR k1</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; INCR k1</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">127.0.0.1:6379&gt; INCR k1</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; get k1</span><br><span class="line"><span class="string">"5"</span></span><br><span class="line">127.0.0.1:6379&gt; DECR k1</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">127.0.0.1:6379&gt; DECR k1</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; DECR k1</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; INCRBY k1 3</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; INCRBY k1 3</span><br><span class="line">(<span class="built_in">integer</span>) 8</span><br><span class="line">127.0.0.1:6379&gt; DECRBY k1 2</span><br><span class="line">(<span class="built_in">integer</span>) 6</span><br><span class="line">127.0.0.1:6379&gt; DECRBY k1 2</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>getrange：获取指定区间范围内的值，类似<code>between...and</code>的关系，从零到负一表示全部。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GETRANGE k1 0 -1</span><br><span class="line"><span class="string">"v1123456"</span></span><br><span class="line">127.0.0.1:6379&gt; GETRANGE k1 0 3</span><br><span class="line"><span class="string">"v112"</span></span><br></pre></td></tr></table></figure>
<p>setrange：设置指定区间范围内的值，格式是<code>setrange key 位置 值</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SETRANGE k1 0 abc</span><br><span class="line">(<span class="built_in">integer</span>) 8</span><br><span class="line">127.0.0.1:6379&gt; get k1</span><br><span class="line"><span class="string">"abc23456"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>setex(set with expire) 键 秒值 / setnx(set if not exist)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; setex k2 10 v2</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; ttl k2		<span class="string">'查看还有多少存活时间'</span></span><br><span class="line">(<span class="built_in">integer</span>) 7</span><br><span class="line">127.0.0.1:6379&gt; get k2</span><br><span class="line"><span class="string">"v2"</span></span><br><span class="line">127.0.0.1:6379&gt; ttl k2</span><br><span class="line">(<span class="built_in">integer</span>) -2</span><br><span class="line">127.0.0.1:6379&gt; get k2</span><br><span class="line">(nil)</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; setnx k1 v11</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; get k1</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; setnx k11 v11</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; get k11</span><br><span class="line"><span class="string">"v11"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>mset / mget / msetnx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET k1 v1 k2 v2 k3 v3</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET</span><br><span class="line">(error) ERR wrong number of arguments <span class="keyword">for</span> <span class="string">'mget'</span> <span class="built_in">command</span></span><br><span class="line">127.0.0.1:6379&gt; MGET k1 k2 k3</span><br><span class="line">1) <span class="string">"v1"</span></span><br><span class="line">2) <span class="string">"v2"</span></span><br><span class="line">3) <span class="string">"v3"</span></span><br><span class="line">127.0.0.1:6379&gt; MSETNX k3 v3 k4 v4</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; GET k4</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; MSETNX k4 v4 k5 v5</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; MGET k4 k5</span><br><span class="line">1) <span class="string">"v4"</span></span><br><span class="line">2) <span class="string">"v5"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Redis列表（List）"><a href="#Redis列表（List）" class="headerlink" title="Redis列表（List）"></a>Redis列表（List）</h3><p>常用<code>List</code>命令：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/13.%E5%B8%B8%E7%94%A8List%E5%91%BD%E4%BB%A4.png" alt></p>
<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>lpush / rpush / lrange</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LPUSH list01 1 2 3 4 5</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"5"</span></span><br><span class="line">2) <span class="string">"4"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"2"</span></span><br><span class="line">5) <span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; RPUSH list02 1 2 3 4 5</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list02 0 -1</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>lpop / rpop</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LPOP list01</span><br><span class="line"><span class="string">"5"</span></span><br><span class="line">127.0.0.1:6379&gt; LPOP list02</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"2"</span></span><br><span class="line">4) <span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE list02 0 -1</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">4) <span class="string">"5"</span></span><br><span class="line">127.0.0.1:6379&gt; RPOP list01</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; RPOP list02</span><br><span class="line"><span class="string">"5"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>lindex：按照索引下标获得元素（从上到下）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"2"</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE list02 0 -1</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; LINDEX list01 3</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; LINDEX list01 2</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">127.0.0.1:6379&gt; LINDEX list02 2</span><br><span class="line"><span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>llen</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LLEN list01</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br></pre></td></tr></table></figure>
</li>
<li><p>lrem key(List Remove)：删N个value</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; RPUSH list03 1 1 2 2 2 3  4 5 5 6 6 6</span><br><span class="line">(<span class="built_in">integer</span>) 12</span><br><span class="line">127.0.0.1:6379&gt; LREM list03 3 2		<span class="string">'把3个2删除'</span></span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list03 0 -1</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br><span class="line">6) <span class="string">"5"</span></span><br><span class="line">7) <span class="string">"6"</span></span><br><span class="line">8) <span class="string">"6"</span></span><br><span class="line">9) <span class="string">"6"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>ltrim key 开始index 结束index</code>：截取指定范围的值后再赋值给key</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LPUSH list01 1 2 3 4 5 6 7 8 9</span><br><span class="line">(<span class="built_in">integer</span>) 9</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"9"</span></span><br><span class="line">2) <span class="string">"8"</span></span><br><span class="line">3) <span class="string">"7"</span></span><br><span class="line">4) <span class="string">"6"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br><span class="line">6) <span class="string">"4"</span></span><br><span class="line">7) <span class="string">"3"</span></span><br><span class="line">8) <span class="string">"2"</span></span><br><span class="line">9) <span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; LTRIM list01 3 5	<span class="string">'将list01中下标为3到5之间的值截取出来赋给list01'</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"6"</span></span><br><span class="line">2) <span class="string">"5"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>rpoplpush 源列表 目的列表</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"6"</span></span><br><span class="line">2) <span class="string">"5"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE list02 0 -1</span><br><span class="line">1) <span class="string">"2"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; RPOPLPUSH list01 list02</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE list02 0 -1</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>lset key index value</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"6"</span></span><br><span class="line">2) <span class="string">"5"</span></span><br><span class="line">127.0.0.1:6379&gt; LSET list01 0 *</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"*"</span></span><br><span class="line">2) <span class="string">"5"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>linsert key before/after 值1 值2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; LINSERT list01 before * java</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"java"</span></span><br><span class="line">2) <span class="string">"*"</span></span><br><span class="line">3) <span class="string">"5"</span></span><br><span class="line">127.0.0.1:6379&gt; LINSERT list01 after * oracle</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">127.0.0.1:6379&gt; LRANGE list01 0 -1</span><br><span class="line">1) <span class="string">"java"</span></span><br><span class="line">2) <span class="string">"*"</span></span><br><span class="line">3) <span class="string">"oracle"</span></span><br><span class="line">4) <span class="string">"5"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="性能总结"><a href="#性能总结" class="headerlink" title="性能总结"></a>性能总结</h4><p><code>List</code>是一个字符串链表，left、right 都可以插入添加。如果键不存在，创建新的链表；如果键已存在，新增内容。如果值全部移除，对应的键也就消失了。链表的操作无论是头和尾效率都很高，但假如对中间元素的操作，效率就很惨淡了。</p>
<h3 id="Redis集合（Set）"><a href="#Redis集合（Set）" class="headerlink" title="Redis集合（Set）"></a>Redis集合（Set）</h3><p>常用<code>Set</code>命令：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/14.Set%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png" alt></p>
<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>sadd / smembers / sismember(s is member)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SADD set01 1 1 2 2 3 3</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS set01</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER set01 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER set01 x</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure>
</li>
<li><p>scard：获取集合里面的元素个数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SCARD set01</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>srem key value</code>：删除集合中的元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SREM set01 3</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS set01</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>srandmember key 某个整数（随机出几个数）</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SADD set02 1 2 3 4 5 10 11 12</span><br><span class="line">(<span class="built_in">integer</span>) 8</span><br><span class="line">127.0.0.1:6379&gt; SRANDMEMBER set02 5		<span class="string">'从set02中随机抽取5个数'</span></span><br><span class="line">1) <span class="string">"12"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"10"</span></span><br><span class="line">4) <span class="string">"2"</span></span><br><span class="line">5) <span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; SRANDMEMBER set02 5</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"12"</span></span><br><span class="line">3) <span class="string">"1"</span></span><br><span class="line">4) <span class="string">"5"</span></span><br><span class="line">5) <span class="string">"10"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>spop key</code>：随机出栈</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SMEMBERS set02</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br><span class="line">4) <span class="string">"4"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br><span class="line">6) <span class="string">"10"</span></span><br><span class="line">7) <span class="string">"11"</span></span><br><span class="line">8) <span class="string">"12"</span></span><br><span class="line">127.0.0.1:6379&gt; SPOP set02</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line">127.0.0.1:6379&gt; SPOP set02</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line">127.0.0.1:6379&gt; SPOP set02</span><br><span class="line"><span class="string">"11"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>smove key1 key2 在key1里某个值</code>：将key1里的某个值赋给key2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SADD set02 x y z</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS set02</span><br><span class="line">1) <span class="string">"z"</span></span><br><span class="line">2) <span class="string">"y"</span></span><br><span class="line">3) <span class="string">"x"</span></span><br><span class="line">127.0.0.1:6379&gt; SMOVE set01 set02 1</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS set02</span><br><span class="line">1) <span class="string">"z"</span></span><br><span class="line">2) <span class="string">"y"</span></span><br><span class="line">3) <span class="string">"x"</span></span><br><span class="line">4) <span class="string">"1"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数学集合类</p>
<ol>
<li><p>差集：<code>sdiff key01 key02</code>  删选出在第一个<code>set</code>里面而不在后面任何一个<code>set</code>里面的项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SADD set01 1 2 3 4 5</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; SADD set02 1 2 3 a b</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; SDIFF set01 set02</span><br><span class="line">1) <span class="string">"4"</span></span><br><span class="line">2) <span class="string">"5"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>交集：<code>sinter key1 key2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SINTER set01 set02</span><br><span class="line">1) <span class="string">"1"</span></span><br><span class="line">2) <span class="string">"2"</span></span><br><span class="line">3) <span class="string">"3"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>并集：<code>sunion key1 key2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SUNION set01 set02</span><br><span class="line">1) <span class="string">"b"</span></span><br><span class="line">2) <span class="string">"3"</span></span><br><span class="line">3) <span class="string">"1"</span></span><br><span class="line">4) <span class="string">"a"</span></span><br><span class="line">5) <span class="string">"5"</span></span><br><span class="line">6) <span class="string">"4"</span></span><br><span class="line">7) <span class="string">"2"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="Redis哈希（Hash）"><a href="#Redis哈希（Hash）" class="headerlink" title="Redis哈希（Hash）"></a>Redis哈希（Hash）</h3><p>及其重要！<code>KV</code>模式不变，但<code>V</code>是一个键值对。<br>常用<code>Hash</code>方法：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/15.Hash%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png" alt></p>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p><strong>hset / hget / hmset / hmget / hgetall / hdel</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hset user id 11		<span class="string">'此时key是`user`，但value是`id 11`'</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; hget user id</span><br><span class="line"><span class="string">"11"</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; hmset customer id 11 name z3 age 25</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; hmget customer id name age</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"z3"</span></span><br><span class="line">3) <span class="string">"25"</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; HGETALL customer</span><br><span class="line">1) <span class="string">"id"</span></span><br><span class="line">2) <span class="string">"11"</span></span><br><span class="line">3) <span class="string">"name"</span></span><br><span class="line">4) <span class="string">"z3"</span></span><br><span class="line">5) <span class="string">"age"</span></span><br><span class="line">6) <span class="string">"25"</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; HDEL customer name</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; hmget customer id name age</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) (nil)</span><br><span class="line">3) <span class="string">"25"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>hlen</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HLEN customer</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>hexists key 在key里面的某个值的key</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HEXISTS customer id</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HEXISTS customer name</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>hkeys / hvals</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HKEYS customer</span><br><span class="line">1) <span class="string">"id"</span></span><br><span class="line">2) <span class="string">"age"</span></span><br><span class="line">127.0.0.1:6379&gt; HVALS customer</span><br><span class="line">1) <span class="string">"11"</span></span><br><span class="line">2) <span class="string">"25"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>hincrby / hincrbyfloat</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HINCRBY customer age 2</span><br><span class="line">(<span class="built_in">integer</span>) 27</span><br><span class="line">127.0.0.1:6379&gt; HSET customer score 91.5</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HINCRBYFLOAT customer score 0.5</span><br><span class="line"><span class="string">"92"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>hsetnx(如果不存在才往里面加)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSETNX customer age 26</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; HSETNX customer email abc@qq.com</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Redis有序集合Zset（sorted-set）"><a href="#Redis有序集合Zset（sorted-set）" class="headerlink" title="Redis有序集合Zset（sorted set）"></a>Redis有序集合Zset（sorted set）</h3><p>在<code>set</code>基础上，加一个<code>score</code>值。之前<code>set</code>是<code>k1 v1 v2 v3</code>，现在<code>zset</code>是<code>k1 score1 v1 score2 v2</code>。</p>
<p><code>Zset</code>常用命令：<br><img src="https://markdown-1259486229.cos.ap-shanghai.myqcloud.com/16.Zset%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png" alt></p>
<h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>zadd / zrange</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; zadd zset01 60 v1 70 v2 80 v3 90 v4 100 v5</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE zset01 0 -1</span><br><span class="line">1) <span class="string">"v1"</span></span><br><span class="line">2) <span class="string">"v2"</span></span><br><span class="line">3) <span class="string">"v3"</span></span><br><span class="line">4) <span class="string">"v4"</span></span><br><span class="line">5) <span class="string">"v5"</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGE zset01 0 -1 withscores</span><br><span class="line"> 1) <span class="string">"v1"</span></span><br><span class="line"> 2) <span class="string">"60"</span></span><br><span class="line"> 3) <span class="string">"v2"</span></span><br><span class="line"> 4) <span class="string">"70"</span></span><br><span class="line"> 5) <span class="string">"v3"</span></span><br><span class="line"> 6) <span class="string">"80"</span></span><br><span class="line"> 7) <span class="string">"v4"</span></span><br><span class="line"> 8) <span class="string">"90"</span></span><br><span class="line"> 9) <span class="string">"v5"</span></span><br><span class="line">10) <span class="string">"100"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>zrangebyscore key 开始score 结束score</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE zset01 70 90</span><br><span class="line">1) <span class="string">"v2"</span></span><br><span class="line">2) <span class="string">"v3"</span></span><br><span class="line">3) <span class="string">"v4"</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE zset01 70 (90		<span class="string">'(表示不包含'</span></span><br><span class="line">1) <span class="string">"v2"</span></span><br><span class="line">2) <span class="string">"v3"</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE zset01 (70 (90</span><br><span class="line">1) <span class="string">"v3"</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE zset01 70 90</span><br><span class="line">1) <span class="string">"v2"</span></span><br><span class="line">2) <span class="string">"v3"</span></span><br><span class="line">3) <span class="string">"v4"</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE zset01 70 90 <span class="built_in">limit</span> 2 2  <span class="string">'limit 2 2 表示从前面的结果中第2个开始截取2个'</span></span><br><span class="line">1) <span class="string">"v4"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>zrem key 某score下对应的value值</code>：作用是删除元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZREM zset01 v5</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE zset01 0 -1 withscores	<span class="string">'没有100分对应的值了'</span></span><br><span class="line">1) <span class="string">"v1"</span></span><br><span class="line">2) <span class="string">"60"</span></span><br><span class="line">3) <span class="string">"v2"</span></span><br><span class="line">4) <span class="string">"70"</span></span><br><span class="line">5) <span class="string">"v3"</span></span><br><span class="line">6) <span class="string">"80"</span></span><br><span class="line">7) <span class="string">"v4"</span></span><br><span class="line">8) <span class="string">"90"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>zcard/zcount key score区间</code>、<code>zrank key values值，作用是获得下标值</code>、<code>zscore key 对应值：获得分数</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZCARD zset01</span><br><span class="line">(<span class="built_in">integer</span>) 4		<span class="string">'zset01有4个值'</span></span><br><span class="line">127.0.0.1:6379&gt; ZCOUNT zset01 60 80</span><br><span class="line">(<span class="built_in">integer</span>) 3		<span class="string">'zset01中60~80之间有三个值'</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANK zset01 v4</span><br><span class="line">(<span class="built_in">integer</span>) 3		<span class="string">'v4的下标值为3'</span></span><br><span class="line">127.0.0.1:6379&gt; ZSCORE zset01 v4</span><br><span class="line"><span class="string">"90"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>zrevrank key values值</code>：逆序获得下标值。<code>zrevrange</code>：逆序获得key中的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZREVRANK zset01 v4</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGE zset01 0 -1</span><br><span class="line">1) <span class="string">"v4"</span></span><br><span class="line">2) <span class="string">"v3"</span></span><br><span class="line">3) <span class="string">"v2"</span></span><br><span class="line">4) <span class="string">"v1"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>zrevrangebyscore key score1 score2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZREVRANGEBYSCORE zset01 80 60</span><br><span class="line">1) <span class="string">"v3"</span></span><br><span class="line">2) <span class="string">"v2"</span></span><br><span class="line">3) <span class="string">"v1"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Redis/" rel="tag"># Redis</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/19/Mybatis与Spring整合时的注意点/" rel="next" title="Mybatis与Spring整合时的注意点。">
                <i class="fa fa-chevron-left"></i> Mybatis与Spring整合时的注意点。
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/27/redis持久化/" rel="prev" title="Redis持久化">
                Redis持久化 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/touxiang.jpg" alt="Mr.Dai">
          <p class="site-author-name" itemprop="name">Mr.Dai</p>
           
              <p class="site-description motion-element" itemprop="description">路漫漫其修远兮。</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#NoSQL入门和概述"><span class="nav-number">1.</span> <span class="nav-text">NoSQL入门和概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NoSQL数据类型简介"><span class="nav-number">1.1.</span> <span class="nav-text">NoSQL数据类型简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#聚合类型"><span class="nav-number">1.1.1.</span> <span class="nav-text">聚合类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NoSQL数据库的四大分类"><span class="nav-number">1.2.</span> <span class="nav-text">NoSQL数据库的四大分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在分布式数据库中CAP原理CAP-BASE"><span class="nav-number">1.3.</span> <span class="nav-text">在分布式数据库中CAP原理CAP + BASE</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis入门介绍"><span class="nav-number">2.</span> <span class="nav-text">Redis入门介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#入门概念"><span class="nav-number">2.1.</span> <span class="nav-text">入门概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis是什么"><span class="nav-number">2.1.1.</span> <span class="nav-text">Redis是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#能干嘛"><span class="nav-number">2.1.2.</span> <span class="nav-text">能干嘛</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#下载与安装"><span class="nav-number">2.1.3.</span> <span class="nav-text">下载与安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis的一些基础知识"><span class="nav-number">2.1.4.</span> <span class="nav-text">Redis的一些基础知识</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis数据类型"><span class="nav-number">3.</span> <span class="nav-text">Redis数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis的五大数据类型"><span class="nav-number">3.1.</span> <span class="nav-text">Redis的五大数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis键（key）"><span class="nav-number">3.2.</span> <span class="nav-text">Redis键（key）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis字符串（String）"><span class="nav-number">3.3.</span> <span class="nav-text">Redis字符串（String）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例"><span class="nav-number">3.3.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis列表（List）"><span class="nav-number">3.4.</span> <span class="nav-text">Redis列表（List）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例-1"><span class="nav-number">3.4.1.</span> <span class="nav-text">案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#性能总结"><span class="nav-number">3.4.2.</span> <span class="nav-text">性能总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis集合（Set）"><span class="nav-number">3.5.</span> <span class="nav-text">Redis集合（Set）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例-2"><span class="nav-number">3.5.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis哈希（Hash）"><span class="nav-number">3.6.</span> <span class="nav-text">Redis哈希（Hash）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例-3"><span class="nav-number">3.6.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis有序集合Zset（sorted-set）"><span class="nav-number">3.7.</span> <span class="nav-text">Redis有序集合Zset（sorted set）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例-4"><span class="nav-number">3.7.1.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.Dai</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
